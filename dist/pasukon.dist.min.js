function n(c){var g=0;return function(){return g<c.length?{done:!1,value:c[g++]}:{done:!0}}}function r(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<c.length;++g){var a=c[g];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");}var u=r(this);
function x(c,g,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""}var z="function"==typeof Object.defineProperties?Object.defineProperty:function(c,g,a){if(c==Array.prototype||c==Object.prototype)return c;c[g]=a.value;return c};
function A(c,g){if(g)a:{var a=u;c=c.split(".");for(var f=0;f<c.length-1;f++){var d=c[f];if(!(d in a))break a;a=a[d]}c=c[c.length-1];f=a[c];g=g(f);g!=f&&null!=g&&z(a,c,{configurable:!0,writable:!0,value:g})}}A("String.prototype.startsWith",function(c){return c?c:function(g,a){var f=x(this,g,"startsWith"),d=f.length,b=g.length;a=Math.max(0,Math.min(a|0,f.length));for(var e=0;e<b&&a<d;)if(f[a++]!=g[e++])return!1;return e>=b}});
A("Array.prototype.fill",function(c){return c?c:function(g,a,f){var d=this.length||0;0>a&&(a=Math.max(0,d+a));if(null==f||f>d)f=d;f=Number(f);0>f&&(f=Math.max(0,d+f));for(a=Number(a||0);a<f;a++)this[a]=g;return this}});function D(c){return c?c:Array.prototype.fill}A("Int8Array.prototype.fill",D);A("Uint8Array.prototype.fill",D);A("Uint8ClampedArray.prototype.fill",D);A("Int16Array.prototype.fill",D);A("Uint16Array.prototype.fill",D);A("Int32Array.prototype.fill",D);
A("Uint32Array.prototype.fill",D);A("Float32Array.prototype.fill",D);A("Float64Array.prototype.fill",D);A("Array.prototype.flat",function(c){return c?c:function(g){g=void 0===g?1:g;for(var a=[],f=0;f<this.length;f++){var d=this[f];Array.isArray(d)&&0<g?(d=Array.prototype.flat.call(d,g-1),a.push.apply(a,d)):a.push(d)}return a}});
A("Symbol",function(c){function g(d){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(d||"")+"_"+f++,d)}function a(d,b){this.a=d;z(this,"description",{configurable:!0,writable:!0,value:b})}if(c)return c;a.prototype.toString=function(){return this.a};var f=0;return g});
A("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<g.length;a++){var f=u[g[a]];"function"===typeof f&&"function"!=typeof f.prototype[c]&&z(f.prototype,c,{configurable:!0,writable:!0,value:function(){return E(n(this))}})}return c});function E(c){c={next:c};c[Symbol.iterator]=function(){return this};return c}
function F(c,g){c instanceof String&&(c+="");var a=0,f={next:function(){if(a<c.length){var d=a++;return{value:g(d,c[d]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f}A("Array.prototype.keys",function(c){return c?c:function(){return F(this,function(g){return g})}});A("Object.is",function(c){return c?c:function(g,a){return g===a?0!==g||1/g===1/a:g!==g&&a!==a}});
A("Array.prototype.includes",function(c){return c?c:function(g,a){var f=this;f instanceof String&&(f=String(f));var d=f.length;a=a||0;for(0>a&&(a=Math.max(a+d,0));a<d;a++){var b=f[a];if(b===g||Object.is(b,g))return!0}return!1}});A("String.prototype.includes",function(c){return c?c:function(g,a){return-1!==x(this,g,"includes").indexOf(g,a||0)}});
A("Math.imul",function(c){return c?c:function(g,a){g=Number(g);a=Number(a);var f=g&65535,d=a&65535;return f*d+((g>>>16&65535)*d+f*(a>>>16&65535)<<16>>>0)|0}});var G="function"==typeof Object.assign?Object.assign:function(c,g){for(var a=1;a<arguments.length;a++){var f=arguments[a];if(f)for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])}return c};A("Object.assign",function(c){return c||G});
(function(){function c(g,a,f){function d(h,k){if(!a[h]){if(!g[h]){var v="function"==typeof require&&require;if(!k&&v)return v(h,!0);if(b)return b(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=a[h]={exports:{}};g[h][0].call(k.exports,function(t){return d(g[h][1][t]||t)},k,k.exports,c,g,a,f)}return a[h].exports}for(var b="function"==typeof require&&require,e=0;e<f.length;e++)d(f[e]);return d}return c})()({1:[function(c){window.Pasukon=c("./pasukon")},{"./pasukon":20}],
2:[function(c,g){g.exports=[{type:"LEXER",tokens:[{type:"TOKEN_DEFINITION",name:"LEX_CLOSE",matcher:{type:"TOKEN_MATCHER",match:"/lex"},action:"match"},{type:"TOKEN_DEFINITION",name:"LEX_OPEN",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^lex\\s+"},action:"match"},{type:"TOKEN_DEFINITION",name:"MATCH",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^match\\s+"},action:"match"},{type:"TOKEN_DEFINITION",name:"IGNORE",matcher:{type:"TOKEN_MATCHER",match:"ignore"},action:"match"},{type:"TOKEN_DEFINITION",name:"COLON",
matcher:{type:"TOKEN_MATCHER",match:":"},action:"match"},{type:"TOKEN_DEFINITION",name:"SEMICOLON",matcher:{type:"TOKEN_MATCHER",match:";"},action:"match"},{type:"TOKEN_DEFINITION",name:"PIPE_ARROW",matcher:{type:"TOKEN_MATCHER",match:"|>"},action:"match"},{type:"TOKEN_DEFINITION",name:"PIPE",matcher:{type:"TOKEN_MATCHER",match:"|"},action:"match"},{type:"TOKEN_DEFINITION",name:"POPEN",matcher:{type:"TOKEN_MATCHER",match:"("},action:"match"},{type:"TOKEN_DEFINITION",name:"PCLOSE",matcher:{type:"TOKEN_MATCHER",
match:")"},action:"match"},{type:"TOKEN_DEFINITION",name:"QUESTION_MARK",matcher:{type:"TOKEN_MATCHER",match:"?"},action:"match"},{type:"TOKEN_DEFINITION",name:"PLUS",matcher:{type:"TOKEN_MATCHER",match:"+"},action:"match"},{type:"TOKEN_DEFINITION",name:"TIMES",matcher:{type:"TOKEN_MATCHER",match:"*"},action:"match"},{type:"TOKEN_DEFINITION",name:"REGEX_MATCHER",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^/[^/]*/"},action:"match"},{type:"TOKEN_DEFINITION",name:"REGEX_MATCHER",matcher:{type:"TOKEN_REGEX_MATCHER",
regex:"^{[^}]*}"},action:"match"},{type:"TOKEN_DEFINITION",name:"CODE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^'[^']*'"},action:"match"},{type:"TOKEN_DEFINITION",name:"CODE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:'^"[^"]*"'},action:"match"},{type:"TOKEN_DEFINITION",name:"NAME",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^[a-zA-Z][a-zA-Z0-9_-]*"},action:"match"},{type:"TOKEN_DEFINITION",name:"WHITESPACE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^\\s+"},action:"ignore"}]},{type:"RULE",name:"token-action",
definitions:[{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"MATCH"},code:"return $1.trim()"},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"IGNORE"}}]},{type:"RULE",name:"token-matcher",definitions:[{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"CODE"},code:'return { type: "TOKEN_MATCHER", match: $1.substring(1, $1.length - 1) }'},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"REGEX_MATCHER"},code:'return { type: "TOKEN_REGEX_MATCHER", regex: $1.substring(1, $1.length - 1) }'}]},
{type:"RULE",name:"token-definition",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"token-action"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"action"}}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",
name:"token-matcher"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"matcher"}}}},code:'return { type: "TOKEN_DEFINITION", name: $.name, matcher: $.matcher, action: $.action }'}]},{type:"RULE",name:"lexer",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"LEX_OPEN"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"many0",arg:{type:"RULE_CALL",name:"token-definition"}},
rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"tokens"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"LEX_CLOSE"}}},code:'return { type: "LEXER", tokens: $.tokens }'}]},{type:"RULE",name:"parser-name",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"POPEN"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",
parser:"token",arg:{type:"RULE_CALL",name:"expr"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PCLOSE"}}},code:"return $.expr"},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"QUESTION_MARK"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "opt", arg: $.arg }'},{type:"BINARY_CALL",
parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PLUS"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "many1", arg: $.arg }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"TIMES"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",
parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "many0", arg: $.arg }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"COLON"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "token", arg: $.arg }'},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"NAME"},code:'return { type: "RULE_CALL", name: $1 }'}]},{type:"RULE",name:"rule-expression",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"lhs"}}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"parser"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"rhs"}}}},code:'return { type: "BINARY_CALL", parser: $.parser, lhs: $.lhs, rhs: $.rhs }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",parser:"as",
lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: $.name, arg: $.arg }'},{type:"RULE_CALL",name:"parser-name"}]},{type:"RULE",name:"rule-eval",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"opt",arg:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PIPE_ARROW"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"CODE"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"code"}}},code:"return $.code.substring(1, $.code.length - 1)"}]},{type:"RULE",name:"rule-definition",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PIPE"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"expr"}}},rhs:{type:"UNARY_CALL",
parser:"opt",arg:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-eval"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"code"}}}}},code:"$.code ? $.expr.code = $.code : null; return $.expr"}]},{type:"RULE",name:"rule",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",
parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"many1",arg:{type:"RULE_CALL",name:"rule-definition"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"definitions"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"SEMICOLON"}}},code:'return { type: "RULE", name: $.name, definitions: $.definitions }'}]},{type:"RULE",name:"rules",definitions:[{type:"UNARY_CALL",parser:"many0",arg:{type:"RULE_CALL",name:"rule"}}]},{type:"RULE",name:"start",
definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"lexer"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"lexer"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rules"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"rules"}}},code:"return [$.lexer].concat($.rules)"},{type:"RULE_CALL",name:"rules"}]}]},{}],3:[function(c,g){function a(d){this.J=d;this.g={};this.a={i:1,line:1}}var f=c("./token");
a.prototype.M=function(d){for(var b=[];""!==d;){var e=this.G(d);var h=(h="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator])?h.call(e):{next:n(e)};e=h.next().value;h=h.next().value;null!==e&&b.push(e);if(d===h)throw Error("Invalid token '"+d[0]+"' at line "+this.a.line+", column "+this.a.i);d=h}b.push(new f({name:"EOF",match:null,i:this.a.i,line:this.a.line}));return b};a.prototype.G=function(d){for(var b=0,e=this.J.length;b<e;b++){var h=this.J[b],k=h.U;if("TOKEN_MATCHER"===k.type){if(d.startsWith(k.match))return b=
"match"===h.action?new f({name:h.name,match:k.match,i:this.a.i,line:this.a.line}):null,this.j(k.match),[b,d.substring(k.match.length)]}else if("TOKEN_REGEX_MATCHER"===k.type&&(k=this.D(h).exec(d),null!==k&&0===k.index))return b="match"===h.action?new f({name:h.name,match:k[0],i:this.a.i,line:this.a.line}):null,this.j(k[0]),[b,d.substring(k[0].length)]}return[null,d]};a.prototype.D=function(d){d=d.U.aa;void 0===this.g[d]&&(this.g[d]=new RegExp(d));return this.g[d]};a.prototype.j=function(d){var b=
this,e=0;d.split("\n").forEach(function(h){b.a.line+=e;0<e?b.a.i=1:e+=1;b.a.i+=h.length})};g.exports=a},{"./token":4}],4:[function(c,g){function a(f){var d=f.match,b=f.line,e=f.i;this.name=f.name;this.match=d;this.line=b||0;this.i=e||0}a.prototype.is=function(f){return this.name===f};g.exports=a},{}],5:[function(c,g){function a(d,b,e){if(void 0===d[1].o)throw Error("AS combinator only works with a token as the RHS: '(my-parser as :somename)'");this.m=d[0];this.name=d[1].o;this.code=b;this.h=e}var f=
c("../evaluator");a.prototype.parse=function(d){d=this.m.parse(d).clone();d.f={name:this.name,value:d.f};this.code&&(d.f=f.eval(this.code,d.f));return d};a.prototype.l=function(){return[this.m]};a.prototype.toString=function(){return"[AS "+this.m+" "+this.name+"]"};g.exports=a},{"../evaluator":13}],6:[function(c,g){function a(b,e,h){this.g=b;this.a=null;this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){b=this.b.parse(b);if(b.F)return f.v(b.c,this.h);this.code&&
(b.f=d.eval(this.code,b.f));return b};a.prototype.l=function(){return[this.b]};a.prototype.toString=function(){return"[CALL RULE "+this.b+"]"};u.Object.defineProperties(a.prototype,{b:{configurable:!0,enumerable:!0,get:function(){null===this.a&&(this.a=this.g());return this.a}}});g.exports=a},{"../evaluator":13,"../result":17}],7:[function(c,g){function a(b,e,h){this.b=b;this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){if(b.A())return f.ok(b);for(var e=[];!b.A();){var h=
this.b.parse(b);null!==h.f&&(e=e.concat(h.f));if(h.F)return f.ok(b,this.code?d.eval(this.code,e):e);b=h.c}};a.prototype.l=function(){return[this.b]};a.prototype.toString=function(){return"[MANY0 "+this.b+"]"};g.exports=a},{"../evaluator":13,"../result":17}],8:[function(c,g){function a(b,e,h){this.b=b;this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){if(b.A())return f.v(b,this.h);for(var e=b,h=[];!e.A();){var k=this.b.parse(e);null!==k.f&&(h=h.concat(k.f));
if(k.F)return 0===h.length?f.v(b,this.h):f.ok(e,this.code?d.eval(this.code,h):h);e=k.c}};a.prototype.l=function(){return[this.b]};a.prototype.toString=function(){return"[MANY1 "+this.b+"]"};g.exports=a},{"../evaluator":13,"../result":17}],9:[function(c,g){function a(b,e,h){this.b=b;this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){b=this.b.parse(b);var e=this.code?d.eval(this.code,b.f):b.f;return f.ok(b.c,e)};a.prototype.l=function(){return[this.b]};a.prototype.toString=
function(){return"[OPTIONAL "+this.b+"]"};g.exports=a},{"../evaluator":13,"../result":17}],10:[function(c,g){function a(b,e,h){this.a=b;this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){for(var e=0,h=this.a.length;e<h;e++){var k=this.a[e].parse(b);if(k.B)return this.code&&(k.f=d.eval(this.code,k.f)),k}return f.v(b,this.h)};a.prototype.l=function(){return this.a};a.prototype.toString=function(){return this.h?"<RULE: "+this.h+">":"[OR "+this.a.map(function(b){return b.toString()}).join(" ")+
"]"};g.exports=a},{"../evaluator":13,"../result":17}],11:[function(c,g){function a(b,e,h){this.m=b[0];this.I=b[1];this.code=e;this.h=h}var f=c("../result"),d=c("../evaluator");a.prototype.parse=function(b){var e=this.m.parse(b);if(e.F)return e;var h=this.I.parse(e.c);return h.B?(h.f=this.code?d.eval(this.code,e.f,h.f):[e.f,h.f],h):f.v(b,this.h)};a.prototype.l=function(){return[this.m,this.I]};a.prototype.toString=function(){return"[THEN "+this.m+" "+this.I+"]"};g.exports=a},{"../evaluator":13,"../result":17}],
12:[function(c,g){function a(b,e){this.b=b;this.K=e||new f}function f(){}var d=0;f.prototype.log=function(b){console.log(b)};a.prototype.parse=function(b){this.log(""+this.a+this.b+": START");this.j();b=this.b.parse(b);this.g();this.log(""+this.a+this.b+": "+(b.B?"OK":"FAIL"));return b};a.prototype.l=function(){return this.b.l()};a.prototype.toString=function(){return this.b.toString()};a.prototype.log=function(b){this.K.log(b)};a.prototype.j=function(){d+=2};a.prototype.g=function(){d-=2};u.Object.defineProperties(a.prototype,
{s:{configurable:!0,enumerable:!0,get:function(){return this.b.s}},o:{configurable:!0,enumerable:!0,get:function(){return this.b.o}},a:{configurable:!0,enumerable:!0,get:function(){return Array(d).fill(" ").join("")}}});g.exports=a},{}],13:[function(c,g){var a={};g.exports={eval:function(f,d,b){if(!f)return null;for(var e={},h=[d,b].flat(),k=0,v=h.length;k<v;k++){var t=h[k];t&&Object.prototype.hasOwnProperty.call(t,"name")&&(e[t.name]=t.value)}return(new Function("$1","$2","$","$ctx",f))(d,b,e,a)},
ba:function(f){a=f}}},{}],14:[function(c,g){function a(d){this.a=d}var f=c("./token-parser");a.prototype.check=function(){var d=this;Object.keys(this.a).forEach(function(b){return d.g(b,b,[])})};a.prototype.g=function(d,b,e){var h=this;this.a[d].l().forEach(function(k){k=h.j(k);if(!(k instanceof f)){e.push(d);if(k.h===b)throw Error("Left recursion found: "+e.join(" -> ")+" -> "+b);e.includes(k.h)||h.g(k.h,b,e)}})};a.prototype.j=function(d){if(void 0===d)throw Error("Could not find leftmost parser");
return d instanceof f?d:void 0!==d.h?d:this.j(d.l()[0])};g.exports=a},{"./token-parser":19}],15:[function(c,g){function a(b,e){this.b=b;this.s=e}var f={},d={set:function(b,e){return f[b]=e},get:function(b){return f[b]},has:function(b){return Object.prototype.hasOwnProperty.call(f,b)},clear:function(){f={}}};a.clear=function(){d.clear()};a.prototype.parse=function(b){return this.a(b)||this.g(b,this.b.parse(b))};a.prototype.l=function(){return this.b.l()};a.prototype.toString=function(){return this.b.toString()};
a.prototype.a=function(b){return d.get(this.s+"-"+b.s)};a.prototype.g=function(b,e){return d.set(this.s+"-"+b.s,e)};u.Object.defineProperties(a.prototype,{o:{configurable:!0,enumerable:!0,get:function(){return this.b.o}}});g.exports=a},{}],16:[function(c,g){function a(m,l){l=void 0===l?{}:l;this.D={O:{or:h,then:k,as:t},X:{Y:d,Z:b,$:e}};this.a={};this.g=Object.assign({},H,l);m=this.S(m);this.start=this.g.start||m;if(null===this.start)throw Error("No rules found");(new I(this.a)).check()}var f=c("./token-parser"),
d=c("./combinators/many0"),b=c("./combinators/many1"),e=c("./combinators/optional"),h=c("./combinators/or"),k=c("./combinators/then"),v=c("./combinators/identity"),t=c("./combinators/as"),I=c("./left-recursion-checker"),J=c("./token-list"),B=c("./memoizable-parser"),K=c("./debuggable-parser"),C=c("./result"),H={start:null,cache:!1,debug:!1,K:null};a.prototype.parse=function(m){this.g.cache&&B.clear();C.clear();var l=this.a[this.start];if(!l)throw Error("Could not find starting parser: '"+this.start+
"'");return l.parse(new J(m))};a.prototype.H=function(){return C.H()};a.prototype.S=function(m){var l=this,p=null;m.forEach(function(q){var y=q.J.map(function(w){return l.j(q.name,w)});l.a[q.name]=l.G(new h(y,void 0,q.name),q);p=q.name});return p};a.prototype.j=function(m,l){m="UNARY_CALL"===l.type?this.T(m,l):"BINARY_CALL"===l.type?this.P(m,l):this.R(m,l);return this.G(m,l)};a.prototype.R=function(m,l){if("token"===l.name)throw Error("Token can only be called as unary");return new v(function(p,q,
y){return function(){var w=p[q];if(void 0===w)throw Error("Could not find parser '"+q+"' in rule '"+y+"'");return w}}(this.a,l.name,m),l.code)};a.prototype.P=function(m,l){if("token"===l.b)throw Error("Token can only be called as unary");var p=this.D.O[l.b];if(void 0===p)throw Error("Could not find binary combinator: '"+l.b+"' in rule '"+m+"'");var q=this.j(m,l.m);m=this.j(m,l.I);return new p([q,m],l.code)};a.prototype.T=function(m,l){if("token"===l.b){if("RULE_CALL"!==l.L.type)throw Error("Tokens cannot call other rules or combinators");
return new f(l.L.name,l.code)}var p=this.D.X[l.b];if(void 0===p)throw Error("Could not find unary combinator: '"+l.b+"' in rule '"+m+"'");return new p(this.j(m,l.L),l.code)};a.prototype.G=function(m,l){var p=m;if(this.g.cache&&!(m instanceof f)){m=p;l=JSON.stringify(l);for(var q=p=0;p<l.length;p++)q=Math.imul(31,q)+l.charCodeAt(p)|0;p=new B(m,q)}this.g.debug&&(p=new K(p,this.g.K));return p};g.exports=a},{"./combinators/as":5,"./combinators/identity":6,"./combinators/many0":7,"./combinators/many1":8,
"./combinators/optional":9,"./combinators/or":10,"./combinators/then":11,"./debuggable-parser":12,"./left-recursion-checker":14,"./memoizable-parser":15,"./result":17,"./token-list":18,"./token-parser":19}],17:[function(c,g){function a(b){var e=b.c,h=b.f;this.u=b.u;this.c=e||new f([]);this.f=h||null}var f=c("./token-list"),d=null;a.prototype.clone=function(){return new a({u:this.u,c:this.c,f:this.f})};a.ok=function(b,e){return new a({u:!0,c:b,f:e})};a.v=function(b,e){e&&(null===d||d.c.length>b.length)&&
(d={c:b,h:e});return new a({u:!1,c:b})};a.H=function(){return d};a.clear=function(){d=null};u.Object.defineProperties(a.prototype,{F:{configurable:!0,enumerable:!0,get:function(){return!this.u}},B:{configurable:!0,enumerable:!0,get:function(){return this.u}}});g.exports=a},{"./token-list":18}],18:[function(c,g){function a(d){this.C=d;this.g=d[0];this.a=null;this.j=f++}var f=0;a.prototype.V=function(d){return this.head.is(d)};a.prototype.A=function(){return 0===this.C.length};u.Object.defineProperties(a.prototype,
{length:{configurable:!0,enumerable:!0,get:function(){return this.C.length}},head:{configurable:!0,enumerable:!0,get:function(){return this.g}},W:{configurable:!0,enumerable:!0,get:function(){null===this.a&&(this.a=new a(this.C.slice(1)));return this.a}},s:{configurable:!0,enumerable:!0,get:function(){return this.j}}});g.exports=a},{}],19:[function(c,g){function a(b,e){this.o=b;this.code=e}var f=c("./result"),d=c("./evaluator");a.prototype.parse=function(b){return b.V(this.o)?f.ok(b.W,this.code?d.eval(this.code,
b.head.match):b.head.match):f.v(b)};a.prototype.l=function(){return[this]};a.prototype.toString=function(){return"[TOKEN "+this.o+"]"};g.exports=a},{"./evaluator":13,"./result":17}],20:[function(c,g){function a(e,h){h=void 0===h?{}:h;e=b(e.toString());this.N=h.N||this.a(e[0]);"LEXER"===e[0].type&&e.shift();this.b=new d(e,h)}var f=c("./lexer/lexer"),d=c("./parsers/parser"),b=c("./self-parse");a.prototype.parse=function(e){if(!e)throw Error("Input missing. Provide a string-able object.");e=this.b.parse(this.N.M(e.toString()));
if(e.B){if(e.c.A()||e.c.head.is("EOF"))return e.f;var h=e.c.head;throw Error("Syntax error line "+h.line+", column "+h.i+". Expected EOF, found <TOKEN "+e.c.head.name+": "+e.c.head.match+">");}e=this.b.H();h=e.c.head;throw Error("Syntax error line "+h.line+", column "+h.i+". Expected '"+e.h+"', found <TOKEN "+e.c.head.name+": "+e.c.head.match+">");};a.prototype.a=function(e){if(void 0===e||"LEXER"!==e.type)throw Error("Lexer was not defined in grammar. Define it or provide a custom lexer.");return new f(e.C)};
g.exports=a},{"./lexer/lexer":3,"./parsers/parser":16,"./self-parse":21}],21:[function(c,g){var a=c("./grammar.json"),f=c("./lexer/lexer"),d=c("./parsers/parser");g.exports=function(b){var e=new f(a[0].C),h=new d(a.slice(1));b=h.parse(e.M(b));if(b.B){if(b.c.A()||b.c.head.is("EOF"))return b.f;h=b.c.head;throw Error("Syntax error line "+h.line+", column "+h.i+". Expected EOF, found <TOKEN "+b.c.head.name+": "+b.c.head.match+">");}h=h.H();b=h.c.head;throw Error("Syntax error line "+b.line+", column "+
b.i+". Expected '"+h.h+"', found <TOKEN "+h.c.head.name+": "+h.c.head.match+">");}},{"./grammar.json":2,"./lexer/lexer":3,"./parsers/parser":16}]},{},[1]);
