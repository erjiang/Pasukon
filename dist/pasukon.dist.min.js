function p(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}}function v(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<a.length;++d){var b=a[d];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");}
var w=v(this),y="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){if(a==Array.prototype||a==Object.prototype)return a;a[d]=b.value;return a};function B(a,d){if(d)a:{var b=w;a=a.split(".");for(var f=0;f<a.length-1;f++){var e=a[f];if(!(e in b))break a;b=b[e]}a=a[a.length-1];f=b[a];d=d(f);d!=f&&null!=d&&y(b,a,{configurable:!0,writable:!0,value:d})}}var C;
if("function"==typeof Object.setPrototypeOf)C=Object.setPrototypeOf;else{var D;a:{var E={O:!0},F={};try{F.__proto__=E;D=F.O;break a}catch(a){}D=!1}C=D?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null}var G=C;function H(){this.m=!1;this.c=null;this.H=void 0;this.a=1;this.G=0;this.i=null}function J(a){if(a.m)throw new TypeError("Generator is already running");a.m=!0}H.prototype.o=function(a){this.H=a};function K(a,d){a.i={R:d,S:!0};a.a=a.G}
H.prototype.return=function(a){this.i={return:a};this.a=this.G};function L(a){this.a=new H;this.c=a}function M(a,d){J(a.a);var b=a.a.c;if(b)return O(a,"return"in b?b["return"]:function(f){return{value:f,done:!0}},d,a.a.return);a.a.return(d);return P(a)}
function O(a,d,b,f){try{var e=d.call(a.a.c,b);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.a.m=!1,e;var c=e.value}catch(g){return a.a.c=null,K(a.a,g),P(a)}a.a.c=null;f.call(a.a,c);return P(a)}function P(a){for(;a.a.a;)try{var d=a.c(a.a);if(d)return a.a.m=!1,{value:d.value,done:!1}}catch(b){a.a.H=void 0,K(a.a,b)}a.a.m=!1;if(a.a.i){d=a.a.i;a.a.i=null;if(d.S)throw d.R;return{value:d.return,done:!0}}return{value:void 0,done:!0}}
function Q(a){this.next=function(d){J(a.a);a.a.c?d=O(a,a.a.c.next,d,a.a.o):(a.a.o(d),d=P(a));return d};this.throw=function(d){J(a.a);a.a.c?d=O(a,a.a.c["throw"],d,a.a.o):(K(a.a,d),d=P(a));return d};this.return=function(d){return M(a,d)};this[Symbol.iterator]=function(){return this}}function R(a,d){d=new Q(new L(d));G&&a.prototype&&G(d,a.prototype);return d}
B("Symbol",function(a){function d(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+f++,e)}function b(e,c){this.a=e;y(this,"description",{configurable:!0,writable:!0,value:c})}if(a)return a;b.prototype.toString=function(){return this.a};var f=0;return d});
B("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<d.length;b++){var f=w[d[b]];"function"===typeof f&&"function"!=typeof f.prototype[a]&&y(f.prototype,a,{configurable:!0,writable:!0,value:function(){return S(p(this))}})}return a});function S(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function T(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""}B("String.prototype.startsWith",function(a){return a?a:function(d,b){var f=T(this,d,"startsWith"),e=f.length,c=d.length;b=Math.max(0,Math.min(b|0,f.length));for(var g=0;g<c&&b<e;)if(f[b++]!=d[g++])return!1;return g>=c}});
B("Array.prototype.fill",function(a){return a?a:function(d,b,f){var e=this.length||0;0>b&&(b=Math.max(0,e+b));if(null==f||f>e)f=e;f=Number(f);0>f&&(f=Math.max(0,e+f));for(b=Number(b||0);b<f;b++)this[b]=d;return this}});function U(a){return a?a:Array.prototype.fill}B("Int8Array.prototype.fill",U);B("Uint8Array.prototype.fill",U);B("Uint8ClampedArray.prototype.fill",U);B("Int16Array.prototype.fill",U);B("Uint16Array.prototype.fill",U);B("Int32Array.prototype.fill",U);
B("Uint32Array.prototype.fill",U);B("Float32Array.prototype.fill",U);B("Float64Array.prototype.fill",U);B("Array.prototype.flat",function(a){return a?a:function(d){d=void 0===d?1:d;for(var b=[],f=0;f<this.length;f++){var e=this[f];Array.isArray(e)&&0<d?(e=Array.prototype.flat.call(e,d-1),b.push.apply(b,e)):b.push(e)}return b}});
function V(a,d){a instanceof String&&(a+="");var b=0,f={next:function(){if(b<a.length){var e=b++;return{value:d(e,a[e]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f}B("Array.prototype.keys",function(a){return a?a:function(){return V(this,function(d){return d})}});B("Object.is",function(a){return a?a:function(d,b){return d===b?0!==d||1/d===1/b:d!==d&&b!==b}});
B("Array.prototype.includes",function(a){return a?a:function(d,b){var f=this;f instanceof String&&(f=String(f));var e=f.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var c=f[b];if(c===d||Object.is(c,d))return!0}return!1}});B("String.prototype.includes",function(a){return a?a:function(d,b){return-1!==T(this,d,"includes").indexOf(d,b||0)}});
B("Math.imul",function(a){return a?a:function(d,b){d=Number(d);b=Number(b);var f=d&65535,e=b&65535;return f*e+((d>>>16&65535)*e+f*(b>>>16&65535)<<16>>>0)|0}});var W="function"==typeof Object.assign?Object.assign:function(a,d){for(var b=1;b<arguments.length;b++){var f=arguments[b];if(f)for(var e in f)Object.prototype.hasOwnProperty.call(f,e)&&(a[e]=f[e])}return a};B("Object.assign",function(a){return a||W});
(function(){function a(d,b,f){function e(h,k){if(!b[h]){if(!d[h]){var n="function"==typeof require&&require;if(!k&&n)return n(h,!0);if(c)return c(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=b[h]={exports:{}};d[h][0].call(k.exports,function(t){return e(d[h][1][t]||t)},k,k.exports,a,d,b,f)}return b[h].exports}for(var c="function"==typeof require&&require,g=0;g<f.length;g++)e(f[g]);return e}return a})()({1:[function(a){window.Pasukon=a("./pasukon")},{"./pasukon":20}],
2:[function(a,d){d.exports=[{type:"LEXER",tokens:[{type:"TOKEN_DEFINITION",name:"LEX_CLOSE",matcher:{type:"TOKEN_MATCHER",match:"/lex"},action:"match"},{type:"TOKEN_DEFINITION",name:"LEX_OPEN",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^lex\\s+"},action:"match"},{type:"TOKEN_DEFINITION",name:"MATCH",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^match\\s+"},action:"match"},{type:"TOKEN_DEFINITION",name:"IGNORE",matcher:{type:"TOKEN_MATCHER",match:"ignore"},action:"match"},{type:"TOKEN_DEFINITION",name:"COLON",
matcher:{type:"TOKEN_MATCHER",match:":"},action:"match"},{type:"TOKEN_DEFINITION",name:"SEMICOLON",matcher:{type:"TOKEN_MATCHER",match:";"},action:"match"},{type:"TOKEN_DEFINITION",name:"PIPE_ARROW",matcher:{type:"TOKEN_MATCHER",match:"|>"},action:"match"},{type:"TOKEN_DEFINITION",name:"PIPE",matcher:{type:"TOKEN_MATCHER",match:"|"},action:"match"},{type:"TOKEN_DEFINITION",name:"POPEN",matcher:{type:"TOKEN_MATCHER",match:"("},action:"match"},{type:"TOKEN_DEFINITION",name:"PCLOSE",matcher:{type:"TOKEN_MATCHER",
match:")"},action:"match"},{type:"TOKEN_DEFINITION",name:"QUESTION_MARK",matcher:{type:"TOKEN_MATCHER",match:"?"},action:"match"},{type:"TOKEN_DEFINITION",name:"PLUS",matcher:{type:"TOKEN_MATCHER",match:"+"},action:"match"},{type:"TOKEN_DEFINITION",name:"TIMES",matcher:{type:"TOKEN_MATCHER",match:"*"},action:"match"},{type:"TOKEN_DEFINITION",name:"REGEX_MATCHER",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^/[^/]*/"},action:"match"},{type:"TOKEN_DEFINITION",name:"REGEX_MATCHER",matcher:{type:"TOKEN_REGEX_MATCHER",
regex:"^{[^}]*}"},action:"match"},{type:"TOKEN_DEFINITION",name:"CODE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^'[^']*'"},action:"match"},{type:"TOKEN_DEFINITION",name:"CODE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:'^"[^"]*"'},action:"match"},{type:"TOKEN_DEFINITION",name:"NAME",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^[a-zA-Z][a-zA-Z0-9_-]*"},action:"match"},{type:"TOKEN_DEFINITION",name:"WHITESPACE",matcher:{type:"TOKEN_REGEX_MATCHER",regex:"^\\s+"},action:"ignore"}]},{type:"RULE",name:"token-action",
definitions:[{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"MATCH"},code:"return $1.trim()"},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"IGNORE"}}]},{type:"RULE",name:"token-matcher",definitions:[{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"CODE"},code:'return { type: "TOKEN_MATCHER", match: $1.substring(1, $1.length - 1) }'},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"REGEX_MATCHER"},code:'return { type: "TOKEN_REGEX_MATCHER", regex: $1.substring(1, $1.length - 1) }'}]},
{type:"RULE",name:"token-definition",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"token-action"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"action"}}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",
name:"token-matcher"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"matcher"}}}},code:'return { type: "TOKEN_DEFINITION", name: $.name, matcher: $.matcher, action: $.action }'}]},{type:"RULE",name:"lexer",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"LEX_OPEN"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"many0",arg:{type:"RULE_CALL",name:"token-definition"}},
rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"tokens"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"LEX_CLOSE"}}},code:'return { type: "LEXER", tokens: $.tokens }'}]},{type:"RULE",name:"parser-name",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"POPEN"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",
parser:"token",arg:{type:"RULE_CALL",name:"expr"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PCLOSE"}}},code:"return $.expr"},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"QUESTION_MARK"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "opt", arg: $.arg }'},{type:"BINARY_CALL",
parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PLUS"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "many1", arg: $.arg }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"TIMES"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",
parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "many0", arg: $.arg }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"COLON"}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: "token", arg: $.arg }'},{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"NAME"},code:'return { type: "RULE_CALL", name: $1 }'}]},{type:"RULE",name:"rule-expression",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"parser-name"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"lhs"}}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"parser"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"rhs"}}}},code:'return { type: "BINARY_CALL", parser: $.parser, lhs: $.lhs, rhs: $.rhs }'},{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",parser:"as",
lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"arg"}}},code:'return { type: "UNARY_CALL", parser: $.name, arg: $.arg }'},{type:"RULE_CALL",name:"parser-name"}]},{type:"RULE",name:"rule-eval",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"opt",arg:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PIPE_ARROW"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",
name:"CODE"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"code"}}},code:"return $.code.substring(1, $.code.length - 1)"}]},{type:"RULE",name:"rule-definition",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"PIPE"}},rhs:{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-expression"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"expr"}}},rhs:{type:"UNARY_CALL",
parser:"opt",arg:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rule-eval"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"code"}}}}},code:"$.code ? $.expr.code = $.code : null; return $.expr"}]},{type:"RULE",name:"rule",definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"NAME"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"name"}}},rhs:{type:"BINARY_CALL",
parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"UNARY_CALL",parser:"many1",arg:{type:"RULE_CALL",name:"rule-definition"}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"definitions"}}},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"SEMICOLON"}}},code:'return { type: "RULE", name: $.name, definitions: $.definitions }'}]},{type:"RULE",name:"rules",definitions:[{type:"UNARY_CALL",parser:"many0",arg:{type:"RULE_CALL",name:"rule"}}]},{type:"RULE",name:"start",
definitions:[{type:"BINARY_CALL",parser:"then",lhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"lexer"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"lexer"}}},rhs:{type:"BINARY_CALL",parser:"as",lhs:{type:"RULE_CALL",name:"rules"},rhs:{type:"UNARY_CALL",parser:"token",arg:{type:"RULE_CALL",name:"rules"}}},code:"return [$.lexer].concat($.rules)"},{type:"RULE_CALL",name:"rules"}]}]},{}],3:[function(a,d){function b(e){this.J=e;this.c={};this.a={j:1,line:1}}var f=a("./token");
b.prototype.U=function g(c){var h=this,k,n,t;return R(g,function(u){if(1==u.a){if(""===c){var x=new f({name:"EOF",match:null,j:h.a.j,line:h.a.line});u.a=0;return{value:x}}x=h.o(c);var z="undefined"!=typeof Symbol&&Symbol.iterator&&x[Symbol.iterator];k=z?z.call(x):{next:p(x)};n=k.next().value;t=k.next().value;null===n?(u.a=4,u=void 0):(u.a=4,u={value:n});return u}if(c===t)throw Error("Invalid token '"+c[0]+"' at line "+h.a.line+", column "+h.a.j);c=t;u.a=1})};b.prototype.o=function(c){for(var g=0,
h=this.J.length;g<h;g++){var k=this.J[g],n=k.W;if("TOKEN_MATCHER"===n.type){if(c.startsWith(n.match))return g="match"===k.action?new f({name:k.name,match:n.match,j:this.a.j,line:this.a.line}):null,this.i(n.match),[g,c.substring(n.match.length)]}else if("TOKEN_REGEX_MATCHER"===n.type&&(n=this.m(k).exec(c),null!==n&&0===n.index))return g="match"===k.action?new f({name:k.name,match:n[0],j:this.a.j,line:this.a.line}):null,this.i(n[0]),[g,c.substring(n[0].length)]}return[null,c]};b.prototype.m=function(c){c=
c.W.da;void 0===this.c[c]&&(this.c[c]=new RegExp(c));return this.c[c]};b.prototype.i=function(c){var g=this,h=0;c.split("\n").forEach(function(k){g.a.line+=h;0<h?g.a.j=1:h+=1;g.a.j+=k.length})};d.exports=b},{"./token":4}],4:[function(a,d){function b(f){var e=f.match,c=f.line,g=f.j;this.name=f.name;this.match=e;this.line=c||0;this.j=g||0}b.prototype.is=function(f){return this.name===f};d.exports=b},{}],5:[function(a,d){function b(e,c,g){if(void 0===e[1].u)throw Error("AS combinator only works with a token as the RHS: '(my-parser as :somename)'");
this.s=e[0];this.name=e[1].u;this.code=c;this.h=g}var f=a("../evaluator");b.prototype.parse=function(e){e=this.s.parse(e).clone();e.g={name:this.name,value:e.g};this.code&&(e.g=f.eval(this.code,e.g));return e};b.prototype.l=function(){return[this.s]};b.prototype.toString=function(){return"[AS "+this.s+" "+this.name+"]"};d.exports=b},{"../evaluator":13}],6:[function(a,d){function b(c,g,h){this.c=c;this.a=null;this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=function(c){c=
this.b.parse(c);if(c.D)return f.B(c.f,this.h);this.code&&(c.g=e.eval(this.code,c.g));return c};b.prototype.l=function(){return[this.b]};b.prototype.toString=function(){return"[CALL RULE "+this.b+"]"};w.Object.defineProperties(b.prototype,{b:{configurable:!0,enumerable:!0,get:function(){null===this.a&&(this.a=this.c());return this.a}}});d.exports=b},{"../evaluator":13,"../result":17}],7:[function(a,d){function b(c,g,h){this.b=c;this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=
function(c){if(c.done)return f.ok(c);for(var g=[];!c.done;){var h=this.b.parse(c);null!==h.g&&(g=g.concat(h.g));if(h.D)return f.ok(c,this.code?e.eval(this.code,g):g);c=h.f}};b.prototype.l=function(){return[this.b]};b.prototype.toString=function(){return"[MANY0 "+this.b+"]"};d.exports=b},{"../evaluator":13,"../result":17}],8:[function(a,d){function b(c,g,h){this.b=c;this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=function(c){if(c.done)return f.B(c,this.h);for(var g=
c,h=[];!g.done;){var k=this.b.parse(g);null!==k.g&&(h=h.concat(k.g));if(k.D)return 0===h.length?f.B(c,this.h):f.ok(g,this.code?e.eval(this.code,h):h);g=k.f}};b.prototype.l=function(){return[this.b]};b.prototype.toString=function(){return"[MANY1 "+this.b+"]"};d.exports=b},{"../evaluator":13,"../result":17}],9:[function(a,d){function b(c,g,h){this.b=c;this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=function(c){c=this.b.parse(c);var g=this.code?e.eval(this.code,c.g):c.g;
return f.ok(c.f,g)};b.prototype.l=function(){return[this.b]};b.prototype.toString=function(){return"[OPTIONAL "+this.b+"]"};d.exports=b},{"../evaluator":13,"../result":17}],10:[function(a,d){function b(c,g,h){this.a=c;this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=function(c){for(var g=0,h=this.a.length;g<h;g++){var k=this.a[g].parse(c);if(k.C)return this.code&&(k.g=e.eval(this.code,k.g)),k}return f.B(c,this.h)};b.prototype.l=function(){return this.a};b.prototype.toString=
function(){return this.h?"<RULE: "+this.h+">":"[OR "+this.a.map(function(c){return c.toString()}).join(" ")+"]"};d.exports=b},{"../evaluator":13,"../result":17}],11:[function(a,d){function b(c,g,h){this.s=c[0];this.I=c[1];this.code=g;this.h=h}var f=a("../result"),e=a("../evaluator");b.prototype.parse=function(c){var g=this.s.parse(c);if(g.D)return g;var h=this.I.parse(g.f);return h.C?(h.g=this.code?e.eval(this.code,g.g,h.g):[g.g,h.g],h):f.B(c,this.h)};b.prototype.l=function(){return[this.s,this.I]};
b.prototype.toString=function(){return"[THEN "+this.s+" "+this.I+"]"};d.exports=b},{"../evaluator":13,"../result":17}],12:[function(a,d){function b(c,g){this.b=c;this.L=g||new f}function f(){}var e=0;f.prototype.log=function(c){console.log(c)};b.prototype.parse=function(c){this.log(""+this.a+this.b+": START");this.i();c=this.b.parse(c);this.c();this.log(""+this.a+this.b+": "+(c.C?"OK":"FAIL"));return c};b.prototype.l=function(){return this.b.l()};b.prototype.toString=function(){return this.b.toString()};
b.prototype.log=function(c){this.L.log(c)};b.prototype.i=function(){e+=2};b.prototype.c=function(){e-=2};w.Object.defineProperties(b.prototype,{v:{configurable:!0,enumerable:!0,get:function(){return this.b.v}},u:{configurable:!0,enumerable:!0,get:function(){return this.b.u}},a:{configurable:!0,enumerable:!0,get:function(){return Array(e).fill(" ").join("")}}});d.exports=b},{}],13:[function(a,d){var b={};d.exports={eval:function(f,e,c){if(!f)return null;for(var g={},h=[e,c].flat(),k=0,n=h.length;k<
n;k++){var t=h[k];t&&Object.prototype.hasOwnProperty.call(t,"name")&&(g[t.name]=t.value)}return(new Function("$1","$2","$","$ctx",f))(e,c,g,b)},ea:function(f){b=f}}},{}],14:[function(a,d){function b(e){this.a=e}var f=a("./token-parser");b.prototype.check=function(){var e=this;Object.keys(this.a).forEach(function(c){return e.c(c,c,[])})};b.prototype.c=function(e,c,g){var h=this;this.a[e].l().forEach(function(k){k=h.i(k);if(!(k instanceof f)){g.push(e);if(k.h===c)throw Error("Left recursion found: "+
g.join(" -> ")+" -> "+c);g.includes(k.h)||h.c(k.h,c,g)}})};b.prototype.i=function(e){if(void 0===e)throw Error("Could not find leftmost parser");return e instanceof f?e:void 0!==e.h?e:this.i(e.l()[0])};d.exports=b},{"./token-parser":19}],15:[function(a,d){function b(c,g){this.b=c;this.v=g}var f={},e={set:function(c,g){return f[c]=g},get:function(c){return f[c]},has:function(c){return Object.prototype.hasOwnProperty.call(f,c)},clear:function(){f={}}};b.clear=function(){e.clear()};b.prototype.parse=
function(c){return this.a(c)||this.c(c,this.b.parse(c))};b.prototype.l=function(){return this.b.l()};b.prototype.toString=function(){return this.b.toString()};b.prototype.a=function(c){return e.get(this.v+"-"+c.v)};b.prototype.c=function(c,g){return e.set(this.v+"-"+c.v,g)};w.Object.defineProperties(b.prototype,{u:{configurable:!0,enumerable:!0,get:function(){return this.b.u}}});d.exports=b},{}],16:[function(a,d){function b(m,l){l=void 0===l?{}:l;this.m={P:{or:t,then:u,as:z},$:{aa:h,ba:k,ca:n}};this.a=
{};this.c=Object.assign({},X,l);this.K=this.c.K||this.H(m[0]);"LEXER"===m[0].type&&(m=m.slice(1));m=this.V(m);this.start=this.c.start||m;if(null===this.start)throw Error("No rules found");(new Y(this.a)).check()}var f=a("../lexer/lexer"),e=a("./token-list"),c=a("./token-parser"),g=a("./result"),h=a("./combinators/many0"),k=a("./combinators/many1"),n=a("./combinators/optional"),t=a("./combinators/or"),u=a("./combinators/then"),x=a("./combinators/identity"),z=a("./combinators/as"),Y=a("./left-recursion-checker"),
N=a("./memoizable-parser"),Z=a("./debuggable-parser"),X={start:null,cache:!1,debug:!1,L:null,K:null};b.prototype.parse=function(m){this.c.cache&&N.clear();g.clear();var l=this.a[this.start];if(!l)throw Error("Could not find starting parser: '"+this.start+"'");return l.parse(new e(this.K.U(m)))};b.prototype.F=function(){return g.F()};b.prototype.V=function(m){var l=this,q=null;m.forEach(function(r){var I=r.J.map(function(A){return l.i(r.name,A)});l.a[r.name]=l.o(new t(I,void 0,r.name),r);q=r.name});
return q};b.prototype.i=function(m,l){m="UNARY_CALL"===l.type?this.X(m,l):"BINARY_CALL"===l.type?this.G(m,l):this.T(m,l);return this.o(m,l)};b.prototype.T=function(m,l){if("token"===l.name)throw Error("Token can only be called as unary");return new x(function(q,r,I){return function(){var A=q[r];if(void 0===A)throw Error("Could not find parser '"+r+"' in rule '"+I+"'");return A}}(this.a,l.name,m),l.code)};b.prototype.G=function(m,l){if("token"===l.b)throw Error("Token can only be called as unary");
var q=this.m.P[l.b];if(void 0===q)throw Error("Could not find binary combinator: '"+l.b+"' in rule '"+m+"'");var r=this.i(m,l.s);m=this.i(m,l.I);return new q([r,m],l.code)};b.prototype.X=function(m,l){if("token"===l.b){if("RULE_CALL"!==l.M.type)throw Error("Tokens cannot call other rules or combinators");return new c(l.M.name,l.code)}var q=this.m.$[l.b];if(void 0===q)throw Error("Could not find unary combinator: '"+l.b+"' in rule '"+m+"'");return new q(this.i(m,l.M),l.code)};b.prototype.o=function(m,
l){var q=m;if(this.c.cache&&!(m instanceof c)){m=q;l=JSON.stringify(l);for(var r=q=0;q<l.length;q++)r=Math.imul(31,r)+l.charCodeAt(q)|0;q=new N(m,r)}this.c.debug&&(q=new Z(q,this.c.L));return q};b.prototype.H=function(m){if(void 0===m||"LEXER"!==m.type)throw Error("Lexer was not defined in grammar. Define it or provide a custom lexer.");return new f(m.N)};d.exports=b},{"../lexer/lexer":3,"./combinators/as":5,"./combinators/identity":6,"./combinators/many0":7,"./combinators/many1":8,"./combinators/optional":9,
"./combinators/or":10,"./combinators/then":11,"./debuggable-parser":12,"./left-recursion-checker":14,"./memoizable-parser":15,"./result":17,"./token-list":18,"./token-parser":19}],17:[function(a,d){function b(c){var g=c.f,h=c.g;this.A=c.A;this.f=g||new f([]);this.g=h||null}var f=a("./token-list"),e=null;b.prototype.clone=function(){return new b({A:this.A,f:this.f,g:this.g})};b.ok=function(c,g){return new b({A:!0,f:c,g:g})};b.B=function(c,g){g&&(null===e||e.f.index<c.index)&&(e={f:c,h:g});return new b({A:!1,
f:c})};b.F=function(){return e};b.clear=function(){e=null};w.Object.defineProperties(b.prototype,{D:{configurable:!0,enumerable:!0,get:function(){return!this.A}},C:{configurable:!0,enumerable:!0,get:function(){return this.A}}});d.exports=b},{"./token-list":18}],18:[function(a,d){function b(e,c){var g=e.next();this.N=e;this.index=c||0;this.head=g.value;this.a=null;this.c=f++}var f=0;b.prototype.Y=function(e){return this.head.is(e)};w.Object.defineProperties(b.prototype,{Z:{configurable:!0,enumerable:!0,
get:function(){null===this.a&&(this.a=new b(this.N,this.index+1));return this.a}},v:{configurable:!0,enumerable:!0,get:function(){return this.c}}});d.exports=b},{}],19:[function(a,d){function b(c,g){this.u=c;this.code=g}var f=a("./result"),e=a("./evaluator");b.prototype.parse=function(c){return c.Y(this.u)?f.ok(c.Z,this.code?e.eval(this.code,c.head.match):c.head.match):f.B(c)};b.prototype.l=function(){return[this]};b.prototype.toString=function(){return"[TOKEN "+this.u+"]"};d.exports=b},{"./evaluator":13,
"./result":17}],20:[function(a,d){function b(c,g){g=void 0===g?{}:g;c=e(c.toString());this.b=new f(c,g)}var f=a("./parsers/parser"),e=a("./self-parse");b.prototype.parse=function(c){if(!c)throw Error("Input missing. Provide a string-able object.");c=this.b.parse(c.toString());if(c.C){if(c.f.done||c.f.head.is("EOF"))return c.g;var g=c.f.head;throw Error("Syntax error line "+g.line+", column "+g.j+". Expected EOF, found <TOKEN "+c.f.head.name+": "+c.f.head.match+">");}c=this.b.F();g=c.f.head;throw Error("Syntax error line "+
g.line+", column "+g.j+". Expected '"+c.h+"', found <TOKEN "+c.f.head.name+": "+c.f.head.match+">");};d.exports=b},{"./parsers/parser":16,"./self-parse":21}],21:[function(a,d){var b=a("./grammar.json"),f=a("./parsers/parser");d.exports=function(e){var c=new f(b);e=c.parse(e);if(e.C){if(e.f.done||e.f.head.is("EOF"))return e.g;c=e.f.head;throw Error("Syntax error line "+c.line+", column "+c.j+". Expected EOF, found <TOKEN "+e.f.head.name+": "+e.f.head.match+">");}c=c.F();e=c.f.head;throw Error("Syntax error line "+
e.line+", column "+e.j+". Expected '"+c.h+"', found <TOKEN "+c.f.head.name+": "+c.f.head.match+">");}},{"./grammar.json":2,"./parsers/parser":16}]},{},[1]);
